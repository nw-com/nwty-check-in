/* 基本重置與字體 */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans TC', 'PingFang TC', 'Microsoft JhengHei', sans-serif;
  color: #111827;
  /* 主頁預設背景改為淺灰色 */
  background: #EEEEEE;
}

/* 設定提示 */
.setup-warning { position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; padding: 16px; z-index: 2000; }
.setup-warning.hidden { display: none; }
.setup-card {
  max-width: 720px; width: 100%; background: #ffffff; border: 1px solid #e5e7eb; border-radius: 16px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.08);
  padding: 24px;
}
.setup-card h2 { margin: 0 0 8px; font-size: 20px; }
.setup-card p { margin: 0; line-height: 1.6; color: #374151; }
.setup-card code { background: #f3f4f6; padding: 2px 6px; border-radius: 6px; }

/* 登入頁 */
.login-view { min-height: 100vh; display: grid; place-items: center; padding: 24px; background: #FF0000; }
.login-card {
  width: 100%; max-width: 560px; background: #ffffff; border-radius: 20px; border: 1px solid #e5e7eb;
  box-shadow: 0 12px 32px rgba(0,0,0,0.10);
  padding: 28px;
}
.brand { display: flex; align-items: center; gap: 14px; margin-bottom: 20px; }
.brand { justify-content: center; }
.brand-text { text-align: center; }
.brand-icon { width: 40px; height: 40px; display: grid; place-items: center; color: #FF0000; }
.brand-title { font-size: 20px; font-weight: 700; }
.brand-subtitle { font-size: 13px; color: #6b7280; }
.btn { appearance: none; border: none; background: #111827; color: #ffffff; padding: 12px 16px; border-radius: 10px; font-size: 15px; cursor: pointer; }
.btn-darkgrey { background: #333333; color: #ffffff; }
.btn:disabled { opacity: 0.6; cursor: not-allowed; }
/* 主按鈕 hover/active/pressed 效果 */
.btn:hover:not(:disabled) { filter: brightness(1.05); box-shadow: 0 6px 16px rgba(0,0,0,0.12); transform: translateY(-1px); }
.btn:active:not(:disabled), .btn.pressed { transform: translateY(0); filter: brightness(0.95); box-shadow: inset 0 2px 6px rgba(0,0,0,0.12); }
.btn-google { width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px; background: #ffffff; color: #111827; border: 1px solid #e5e7eb; }
.btn-primary { background: #FF0000; }
.muted { color: #6b7280; }
.google-icon { width: 18px; height: 18px; }

/* 表單樣式 */
.login-form { display: grid; grid-template-columns: 1fr; gap: 8px; }
.form-head { display: flex; align-items: center; justify-content: space-between; }
.remember { display: inline-flex; align-items: center; gap: 6px; font-size: 13px; color: #374151; }
.label { font-size: 13px; color: #374151; }
.input {
  width: 100%; background: #ffffff; border: 1px solid #e5e7eb; border-radius: 10px;
  padding: 10px 12px; font-size: 14px; color: #111827;
}
.input:focus { outline: 2px solid #FF0000; border-color: #FF0000; }
.login-actions { display: flex; gap: 8px; margin-top: 6px; }
.login-actions .btn { width: 100%; }
.login-secondary { display: flex; gap: 8px; margin-top: 10px; flex-direction: column; }
.login-secondary .btn { width: 100%; }
.btn-ghost { background: transparent; color: #374151; border: 1px solid transparent; }
.btn-ghost:hover { background: #f3f4f6; }
.input-wrap { position: relative; }
.icon-btn { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: transparent; border: none; padding: 4px; color: #6b7280; cursor: pointer; border-radius: 6px; }
.icon-btn:hover { background: #f3f4f6; }
.icon-btn:active, .icon-btn.pressed { background: #e5e7eb; }

/* 主頁固定版面（10/10/70/10） */
.app-view { min-height: 100vh; background: #EEEEEE; }
.hidden { display: none; }

.app-header {
  position: fixed; top: 0; left: 0; right: 0; height: 8vh; min-height: 48px;
  display: flex; align-items: center; justify-content: space-between; padding: 0 14px;
  background: #CC0000; color: #ffffff; border-bottom: none; z-index: 1000;
}
.header-left { display: flex; align-items: center; gap: 10px; }
.header-icon { width: 28px; height: 28px; display: grid; place-items: center; }
.system-name { font-weight: 700; font-size: 16px; color: inherit; }
.header-right { display: flex; align-items: center; gap: 10px; color: inherit; }
.net-indicator { width: 22px; height: 22px; display: grid; place-items: center; }
.net-indicator .wifi { width: 22px; height: 22px; display: block; }
.net-online .wifi { color: #0f9d58; }
.net-offline .wifi { color: #9ca3af; }

@keyframes wavePulse { 0%,100% { opacity: 0.35; } 50% { opacity: 1; } }
.net-online .wifi-wave.wave1 { animation: wavePulse 1.2s infinite; }
.net-online .wifi-wave.wave2 { animation: wavePulse 1.2s infinite .15s; }
.net-online .wifi-wave.wave3 { animation: wavePulse 1.2s infinite .3s; }
.net-offline .wifi-wave { opacity: 0.35; animation: none; }
.user-name { font-size: 14px; color: inherit; }
.user-photo { width: 36px; height: 36px; border-radius: 50%; object-fit: cover; background: #e5e7eb; border: 2px solid #ffffff; }
/* 將頭像作為可點擊按鈕 */
.user-photo { cursor: pointer; }

.app-subheader {
  position: fixed; top: 8vh; left: 0; right: 0; height: 6vh; min-height: 44px;
  display: flex; align-items: center; padding: 0 10px; background: #EEEEEE; border-bottom: 1px solid #e5e7eb; z-index: 900;
}
.subheader-text { font-size: 14px; color: #111827; }

/* 子分頁（頁中上） */
.subheader-tabs { display: grid; grid-auto-flow: column; grid-auto-columns: max-content; align-items: center; gap: 8px; overflow-x: auto; overflow-y: visible; width: 100%; -webkit-overflow-scrolling: touch; }
.subtab-btn { background: transparent; border: none; color: #374151; font-size: 14px; padding: 0 12px; border-radius: 999px; position: relative; height: 36px; display: inline-flex; align-items: center; }
.subtab-btn.active { color: #FF0000; }
/* 子分頁游標與 hover/active/pressed 效果 */
button, .tab-btn, .subtab-btn { cursor: pointer; }
button[disabled] { cursor: not-allowed; }
.subtab-btn:hover { background: #f3f4f6; }
.subtab-btn:active, .subtab-btn.pressed { background: #e5e7eb; }

.app-main {
  /* 78% 高度視覺區域，避開上方 14vh（8+6）固定列與下方 8vh 頁尾 */
  padding-top: calc(8vh + 6vh + 12px);
  padding-bottom: calc(8vh + 12px);
  min-height: 78vh;
  background: #EEEEEE;
}
.section { padding: 12px; }
.panel {
  background: #ffffff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 16px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.06);
}
.panel h3 { margin: 0 0 8px 0; font-size: 16px; }
/* 縮小頁中（app-main）內的按鈕尺寸 */
.app-main .btn { padding: 8px 12px; font-size: 14px; border-radius: 8px; }
.btn-sm { padding: 6px 10px; font-size: 13px; border-radius: 8px; }

/* 設定分頁內表格與列表樣式 */
.block {
  margin-top: 16px;
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  padding: 12px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.06);
}
.block-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }
.block-header.centered { justify-content: center; }
.block#block-month-summary .block-header.centered { position: relative; }
.block#block-month-summary #pointsPrevMonth { position: absolute; left: 8px; top: 50%; transform: translateY(-50%); }
.block#block-month-summary #pointsNextMonth { position: absolute; right: 8px; top: 50%; transform: translateY(-50%); }
.block#block-month-summary #pointsPrevMonth,
.block#block-month-summary #pointsNextMonth { background: #ffffff; color: #111827; border: none; }
.block-title { font-weight: 600; font-size: 15px; }
.block-actions { display: flex; gap: 8px; }

.month-total-label { text-align: center; color: #374151; font-size: 14px; }
.month-total-wrap { display: flex; align-items: center; justify-content: center; }
.month-total { font-size: 28px; font-weight: 700; }
.month-total.total-zero { color: #111827; }
.month-total.total-pos { color: #0f9d58; }
.month-total.total-neg { color: #d93025; }

.table { width: 100%; border-collapse: collapse; }
.table thead th { text-align: left; font-size: 13px; color: #6b7280; border-bottom: 1px solid #e5e7eb; padding: 8px; white-space: nowrap; }
.table tbody td { border-bottom: 1px solid #f3f4f6; padding: 8px; font-size: 14px; vertical-align: top; white-space: nowrap; }
.table .cell-actions { white-space: nowrap; }
.table-wrapper { width: 100%; overflow-x: auto; }
/* 幹部地圖下方列表：響應式欄寬與換行 */
#leaderStatusBlock .table { table-layout: fixed; width: 100%; min-width: 100%; }
#leaderStatusBlock .table thead th,
#leaderStatusBlock .table tbody td { white-space: nowrap; }
#leaderStatusView { overflow-x: auto; }
#leaderStatusBlock .table thead th:nth-child(1),
#leaderStatusBlock .table tbody td:nth-child(1) { width: 56px; }
/* 僅固定頭像欄寬，其餘欄位由容器水平捲動呈現 */
#leaderStatusBlock .table .user-photo { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; }
@media (max-width: 480px) {
  #leaderStatusBlock .table thead th { font-size: 12px; padding: 6px; }
  #leaderStatusBlock .table tbody td { font-size: 12px; padding: 6px; }
}

/* 通用彈窗 */
.modal-root { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(17, 24, 39, 0.35); z-index: 9999; padding: 16px; }
.modal-root:not(.hidden) { display: flex; }
.modal {
  width: 100%;
  max-width: 640px;
  /* 不超過視窗尺寸，保留邊距 */
  max-height: calc(100vh - 48px);
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  box-shadow: 0 12px 32px rgba(0,0,0,0.2);
  /* 內容溢出時，改由內部垂直捲動 */
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
  z-index: 10000;
}
.modal-header { display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; border-bottom: 1px solid #e5e7eb; }
.modal-title { font-size: 16px; font-weight: 700; }
.modal-body {
  padding: 12px 16px;
  display: grid;
  gap: 10px;
  /* 讓內容區自己捲動，不撐爆視窗 */
  overflow-y: auto;
}
.modal-footer { display: flex; align-items: center; justify-content: flex-end; gap: 8px; padding: 12px 16px; border-top: 1px solid #e5e7eb; }
.form-row { display: grid; grid-template-columns: 1fr 2fr; gap: 8px; align-items: center; }
.form-row .label { margin: 0; }
.form-row .input { width: 100%; }
.form-row select.input {
  -webkit-appearance: auto;
  -moz-appearance: auto;
  appearance: auto;
  pointer-events: auto;
  background-color: #ffffff;
}
.help { font-size: 12px; color: #6b7280; }

.app-footer {
  position: fixed; bottom: 0; left: 0; right: 0; height: 8vh; min-height: 48px; display: flex; align-items: center; justify-content: space-around;
  background: #FFFFFF; border-top: 1px solid #e5e7eb; z-index: 1000;
}
.tab-btn { background: transparent; border: none; font-size: 15px; color: #374151; padding: 10px 16px; border-radius: 8px; display: flex; flex-direction: column; align-items: center; gap: 4px; }
.tab-btn.active { color: #FF0000; font-weight: 600; }
/* 頁尾分頁按鈕 hover/active/pressed 效果 */
.tab-btn:hover { background: #f3f4f6; }
.tab-btn:active, .tab-btn.pressed { background: #e5e7eb; transform: translateY(1px); }

/* 讓角色權限隱藏能壓過 .tab-btn 的 display 設定 */
.app-footer .tab-btn.hidden { display: none !important; }
.app-footer .tab-btn { position: relative; }
.tab-btn[data-tab="leader"] { position: relative; }

/* 頁尾圖示 */
.tab-icon { width: 22px; height: 22px; color: currentColor; }

/* 小型裝置優化 */
@media (max-width: 480px) {
  .brand-title { font-size: 18px; }
  .system-name { font-size: 15px; }
}

/* 首頁專用版面：頁首40%、頁中上0%、頁中52%、頁尾8% */
.home-layout { --hero-size: clamp(240px, 50vw, 720px); }
.home-layout .app-header {
  height: 40vh;
  min-height: 40vh;
  position: fixed; top: 0; left: 0; right: 0;
  /* 使用 Grid 切為 A/B/C/D/E 五列 */
  display: grid;
  grid-template-rows: 5vh 5vh 7vh 7vh 16vh;
  background: #CC0000;
}
.home-layout .app-subheader {
  display: none;
  height: 0;
  min-height: 0;
  padding: 0;
  border: none;
}
.home-layout .app-main {
  /* 避開 40vh 頁首與 8vh 頁尾，保留內容邊距 */
  padding-top: calc(40vh + 12px);
  padding-bottom: calc(8vh + 12px);
  min-height: 52vh;
}

/* 首頁：頁中 F–K（總高 50vh） */
.home-layout .home-mid-stack {
  height: 50vh;
  display: grid;
  grid-template-rows: 16vh 8vh 6vh 6vh; /* F, G, H, I */
  align-items: stretch;
  gap: 8px;
}
.home-layout .home-mid-stack .mid-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2vh;
}
.home-layout .home-mid-stack .row-h {
  width: 100%;
  margin-inline: auto;
  display: flex;
  align-items: center;
  justify-content: center;
}
.home-layout .home-mid-stack .row-h .btn { width: 100%; height: 5vh; padding: 0 4vh; font-size: 2.8vh; font-weight: 300; border-radius: 0; }
.home-layout .home-mid-stack .row-i .btn { flex: 1; height: 5vh; padding: 0 4vh; font-size: 2.8vh; font-weight: 300; border-radius: 0; margin: 0; }
.home-layout .home-mid-stack .row-g {
  width: 100%;
  margin-inline: auto;
  background: #f3f4f6;
  border: none;
  border-radius: 0;
  padding: 4px 8px;
  box-sizing: border-box;
}
.home-layout .home-mid-stack .status-text {
  font-size: 2vh;
  font-weight: 700;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.home-layout .home-mid-stack .btn {
  height: 4.2vh;
  padding: 0 2vh;
  font-size: 3.2vh;
  font-weight: 300; /* 細體 */
  border-radius: 0; /* 直角 */
}
/* F 行：顯示大照片下方 50% */
/* 移除 F 行 hero-crop 樣式（現行不顯示） */
/* 顏色方案 */
.btn-green { background: #0f9d58; }
.btn-red { background: #FF0000; }
.btn-darkred { background: #CC0000; }
.btn-blue { background: #1e88e5; }
.btn-darkgreen { background: #0b8043; }
.btn-orange { background: #f57c00; }
.btn-teal { background: #26a69a; }
.btn-purple { background: #8e24aa; }
/* 灰色按鈕（側邊） */
.btn-grey { background: #bfbfbf; color: #222; }

/* 狀態顏色對應（文字與大照片邊框） */
#homeStatus .status-label.work { color: #0f9d58; }
#homeStatus .status-flag.bad { background: #CC0000; color: #ffffff; padding: 2px 6px; border-radius: 4px; font-size: 12px; display: inline-block; line-height: 1.4; }
.status-flag.bad { background: #CC0000; color: #ffffff; padding: 2px 6px; border-radius: 4px; font-size: 12px; display: inline-block; line-height: 1.4; }
/* 通用狀態標籤顏色（列表卡片等處） */
.status-label.work { color: #0f9d58; }
.status-flag.good { background: #0f9d58; color: #ffffff; padding: 2px 6px; border-radius: 4px; font-size: 12px; display: inline-block; line-height: 1.4; }
.status-label.off { color: #d93025; }
.status-label.out { color: #1e88e5; }
.status-label.arrive { color: #1e88e5; }
.status-label.leave { color: #1e88e5; }
.status-label.return { color: #0b8043; }
.status-label.bad { color: #CC0000; }
.status-label.leave-request { color: #f57c00; }
.status-label.holiday { color: #0000ff; }
.status-label.missing { color: #ff0000; }
.status-holiday { color: #0000ff; }
.status-missing { color: #ff0000; }
/* 預設狀態標籤樣式：保持顏色由各狀態類別決定 */
.status-label { color: inherit; font-weight: 300; font-size: inherit; }

/* 首頁 F 行（班表狀態）指定文字顏色：上班日黑、值班日棕、休假日灰 */
.home-layout .home-mid-stack .row-f .status-label.work { color: #000 !important; }
.home-layout .home-mid-stack .row-f .status-label.arrive { color: #6b4e00 !important; }
.home-layout .home-mid-stack .row-f .status-label.off { color: #9ca3af !important; }

/* 表格中的狀態標籤字級與字重與儲存格一致 */
.table .status-label { font-size: inherit; font-weight: inherit; }
/* 首頁狀態列背景色（依狀態） */
body.status-work .home-layout .home-mid-stack .row-g { background: #e6f4ea; }
body.status-off .home-layout .home-mid-stack .row-g { background: #fce8e6; }
body.status-out .home-layout .home-mid-stack .row-g { background: #e8f0fe; }
body.status-arrive .home-layout .home-mid-stack .row-g { background: #e8f0fe; }
body.status-leave .home-layout .home-mid-stack .row-g { background: #e8f0fe; }
body.status-return .home-layout .home-mid-stack .row-g { background: #e9f7ef; }
body.status-leave-request .home-layout .home-mid-stack .row-g { background: #fff4e6; }

/* 大照片邊框顏色（依狀態）與動畫效果 */
.home-layout .home-hero-photo {
  border-style: solid;
  border-color: #ffffff;
  border-width: clamp(8px, 2vh, 24px); /* 自適應邊框厚度：最小 8px，隨視窗 2vh，上限 24px */
  box-sizing: border-box; /* 讓邊框向內縮不影響外部尺寸 */
  transition: border-color 200ms ease, box-shadow 200ms ease;
  animation: heroPulseGlow 3000ms infinite ease-in-out;
}
body.status-work .home-hero-photo { border-color: #0f9d58; box-shadow: 0 0 20px rgba(15,157,88,0.35); }
body.status-off .home-hero-photo { border-color: #d93025; box-shadow: 0 0 20px rgba(217,48,37,0.35); }
body.status-out .home-hero-photo { border-color: #1e88e5; box-shadow: 0 0 20px rgba(30,136,229,0.35); }
body.status-arrive .home-hero-photo { border-color: #1e88e5; box-shadow: 0 0 20px rgba(30,136,229,0.35); }
body.status-leave .home-hero-photo { border-color: #1e88e5; box-shadow: 0 0 20px rgba(30,136,229,0.35); }
body.status-return .home-hero-photo { border-color: #0b8043; box-shadow: 0 0 20px rgba(11,128,67,0.35); }
body.status-leave-request .home-hero-photo { border-color: #f57c00; box-shadow: 0 0 20px rgba(245,124,0,0.35); }

/* 大照片向外擴張的光暈動畫（依狀態顏色） */
body { --hero-pulse-rgb: 15,157,88; }
body.status-work { --hero-pulse-rgb: 15,157,88; }
body.status-off { --hero-pulse-rgb: 217,48,37; }
body.status-out { --hero-pulse-rgb: 30,136,229; }
body.status-arrive { --hero-pulse-rgb: 30,136,229; }
body.status-leave { --hero-pulse-rgb: 30,136,229; }
body.status-return { --hero-pulse-rgb: 11,128,67; }
body.status-leave-request { --hero-pulse-rgb: 245,124,0; }

@keyframes heroPulseGlow {
  0% { box-shadow: 0 0 0 0 rgba(var(--hero-pulse-rgb), 0.40), 0 8px 24px rgba(0,0,0,0.12); }
  50% { box-shadow: 0 0 0 36px rgba(var(--hero-pulse-rgb), 0.12), 0 8px 24px rgba(0,0,0,0.12); }
  100% { box-shadow: 0 0 0 0 rgba(var(--hero-pulse-rgb), 0.40), 0 8px 24px rgba(0,0,0,0.12); }
}

/* 首頁大圖：50vw，水平置中，介於頁首與頁中之間（疊加顯示） */
.home-layout .home-hero {
  /* 使用外層定義的 --hero-size，確保圓心對準 40vh 分隔線 */
  position: fixed;
  top: calc(40vh - (var(--hero-size) / 2));
  left: 0;
  right: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: center;
  justify-content: center;
  height: var(--hero-size);
  z-index: 2100;
  /* 置於最上層但不阻擋互動 */
  pointer-events: none;
}
.home-layout .home-hero-photo {
  /* 保持正圓：寬高一致（使用 clamp 避免寬螢幕超過上限時偏移） */
  width: var(--hero-size);
  height: var(--hero-size);
  aspect-ratio: 1 / 1;
  object-fit: cover;
  border-radius: 50%;
  border: 2px solid #ffffff;
  box-shadow: 0 8px 24px rgba(0,0,0,0.12);
}

.home-layout .home-hero-lunar,
.home-layout .home-hero-date,
.home-layout .home-hero-time {
  color: #ffffff;
  text-align: center;
  text-shadow: 0 1px 2px rgba(0,0,0,0.35);
  font-weight: 600;
}
/* A/B/C/D/E 文字堆疊（置於地圖上方） */
/* 早期規則移除，改由下方單一規則統一管理 */
.home-layout .home-header-stack .row-b,
.home-layout .home-header-stack .row-c,
.home-layout .home-header-stack .row-d { place-items: start center; }
.home-layout .home-header-stack .stack-text { color: #ffffff; text-shadow: 0 1px 2px rgba(0,0,0,0.35); }
/* B 列：西元日期（細體，列高 5vh 的 60%） */
.home-layout .home-header-stack .date { font-size: 4vh; font-weight: 300; }
/* C 列：時間（粗體，列高 5vh 的 80%） */
.home-layout .home-header-stack .time { font-size: 7vh; font-weight: 700; letter-spacing: 0.5px; }
/* D 列：登入者姓名（細體，列高 9vh 的 60%） */
.home-layout .home-header-stack .name { font-size: 4vh; font-weight: 300; }

/* Header內容靠上 */
.home-layout .app-header .header-left { display: none; }
.home-layout .app-header .header-right { display: none; }
.home-layout .app-header .header-right { height: 8vh; }

/* 首頁：A/B/C/D/E 堆疊容器（置於地圖上方） */
.home-layout .home-header-stack {
  position: absolute; inset: 0; height: 40vh; pointer-events: none; z-index: 1200;
  display: grid;
  grid-template-rows: 5vh 5vh 7vh 7vh 16vh;
}
/* 預設各列內容靠該列最上緣 */
.home-layout .home-header-stack .stack-row { display: grid; place-items: start center; }
/* A/E 列置中對齊 */
.home-layout .home-header-stack .row-a,
.home-layout .home-header-stack .row-e { place-items: center; }
/* D 列垂直置中 */
.home-layout .home-header-stack .row-d { place-items: center; }
.home-layout .home-header-stack .stack-text { color: #ffffff; text-shadow: 0 1px 2px rgba(0,0,0,0.35); }
.home-layout .home-header-stack .stack-text.lunar { font-weight: 300; }
.home-layout .home-header-stack .stack-text.date { font-weight: 300; }
.home-layout .home-header-stack .stack-text.time { font-weight: 700; letter-spacing: 0.5px; }

/* 首頁：隱藏右上角小頭像，讓歡迎文字靠右顯示 */
.home-layout .user-photo { display: none; }

/* 首頁 A 行：LOGO 與系統名稱置中放大 */
.home-layout .home-header-stack .logo { display: inline-flex; align-items: center; gap: 1vh; font-weight: 700; }
.home-layout .home-header-stack .logo .logo-icon { width: 2.2vh; height: 2.2vh; }
.home-layout .home-header-stack .logo .logo-title { font-size: 2vh; }
.home-layout .user-name { text-align: right; }

/* 首頁：地圖覆蓋層（置於頁首上方，透明 10%，與 header 同高） */
.home-layout .app-header .home-map-overlay { position: absolute; inset: 0; z-index: 1; opacity: 0.40; pointer-events: none; }
.home-layout .app-header .home-map-overlay img { width: 100%; height: 100%; object-fit: cover; }
/* 幹部 > 班表 子分頁布局 */
.roster-layout { height: 78vh; display: flex; flex-direction: column; }
.roster-row { display: flex; align-items: center; gap: 1vh; padding: 1vh; }
.roster-a { height: 6vh; }
.roster-b { height: 42vh; }
.roster-c { height: 20vh; }
.roster-label { font-size: 2.2vh; }
.roster-select { font-size: 2.2vh; padding: 0.6vh 1vh; }
.roster-calendar { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: #f5f5f5; border: 1px solid #ddd; }
.roster-info { width: 100%; height: 100%; padding: 1vh; background: #fff; border: 1px solid #ddd; font-size: 16px; overflow-x: auto; }
/* 班表月曆樣式 */
.roster-calendar { display: block; background: #ffffff; border: 1px solid #e5e7eb; border-radius: 0; padding: 8px; box-shadow: none; }
/* 導覽置於 thead 上方（見 JS 結構），按鈕深色、標題三行 */
.roster-cal-header { display: flex; flex-direction: row; align-items: center; justify-content: center; gap: 12px; margin-bottom: 8px; position: relative; }
#rosterPrevMonth, #rosterNextMonth { background: #ffffff; color: #111827; border: none; }
#rosterPrevMonth { position: absolute; left: 8px; top: 50%; transform: translateY(-50%); }
#rosterNextMonth { position: absolute; right: 8px; top: 50%; transform: translateY(-50%); }
.roster-cal-nav { display: flex; align-items: center; justify-content: center; gap: 12px; }
.roster-cal-nav-btn { width: 36px; height: 36px; border: none; border-radius: 8px; background: #111827; color: #ffffff; font-size: 18px; line-height: 1; cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.15); }
.roster-cal-nav-btn:hover { background: #0f172a; }
.roster-cal-nav-btn:active { transform: translateY(1px); }
.roster-cal-title { display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 600; color: #111827; line-height: 1.05; }
.roster-cal-title .title-line { font-size: 14px; }
.roster-cal-title .title-year { font-size: 16px; }

/* 表格與表頭 */
.roster-cal-table { width: 100%; border-collapse: collapse; table-layout: fixed; }
.roster-cal-table thead th { text-align: center; font-size: 13px; color: #6b7280; background: #f9fafb; border: none; padding: 8px 4px; font-weight: 500; }
.roster-cal-table tbody td { border: none; padding: 0; text-align: center; }

/* 日期格：依月份狀態區分 */
.roster-cal-cell { padding: 0; }
.roster-cal-cell.prev .roster-cal-day-disabled,
.roster-cal-cell.next .roster-cal-day-disabled { background: #eeeeee; color: #9ca3af; }
.roster-cal-cell.curr .roster-cal-day { background: #e8f1ff; color: #0f172a; border: none; }
.roster-cal-cell.curr .roster-cal-day:hover { background: #dbe9ff; }
.roster-cal-cell.today .roster-cal-day { background: #ffe4e6; border: none; }

/* 以狀態類別覆蓋當月/今日預設底色 */
.roster-cal-cell.curr .roster-cal-day.status-work { background: #e8f1ff; color: #0f172a; }
.roster-cal-cell.curr .roster-cal-day.status-duty { background: #fff3a5; color: #6b4e00; }
.roster-cal-cell.curr .roster-cal-day.status-off { background: #eeeeee; color: #9ca3af; }
.roster-cal-cell.today .roster-cal-day.status-work { background: #e8f1ff; }
.roster-cal-cell.today .roster-cal-day.status-duty { background: #fff3a5; }
.roster-cal-cell.today .roster-cal-day.status-off { background: #eeeeee; }

/* 可點與不可點的方塊格式 */
.roster-cal-day, .roster-cal-day-disabled { width: calc(100% - 8px); height: auto; aspect-ratio: 1 / 1; margin: 4px; display: flex; align-items: center; justify-content: center; border-radius: 8px; font-size: 14px; line-height: 1; box-sizing: border-box; }
.roster-cal-day { border: none; background: #f9fafb; color: #111827; cursor: pointer; }
.roster-cal-day:hover { background: #f3f4f6; }
.roster-cal-day-disabled { border: none; }

/* 班表狀態底色（未判定完成度時） */
.roster-cal-day.status-work { background: #e8f1ff; color: #0f172a; }
.roster-cal-day.status-duty { background: #fff3a5; color: #6b4e00; }
.roster-cal-day.status-off { background: #eeeeee; color: #9ca3af; }

/* 完成度覆蓋（已完成=綠、未完成=紅） */
.roster-cal-day.done { background: #e6f4ea !important; color: #0b8043; }
.roster-cal-day.undone { background: #ffe4e6 !important; color: #b00020; }

/* 其他狀態（選取、假日、值班徽章等，視資料有無） */
.roster-cal-cell.selected .roster-cal-day { outline: 2px solid #fca5a5; }

/* 日期列與新增按鈕列 */
.roster-datebar { display: flex; align-items: center; justify-content: space-between; gap: 8px; margin-bottom: 8px; }
/* 表格寬度超過時可水平捲動 */
.roster-list { min-width: 640px; }

/* 新增班表彈窗日期選擇格 */
.pick-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; margin-top: 6px; }
.pick-day { display: flex; align-items: center; justify-content: center; height: 32px; border-radius: 8px; background: #f9fafb; color: #111827; border: 1px solid #e5e7eb; cursor: pointer; font-size: 14px; }
.pick-day:hover { background: #f3f4f6; }
.pick-day.work-selected { background: #dbe9ff; border-color: #bcd3ff; }
.pick-day.duty-selected { background: #fff3a5; border-color: #ffe58f; }
.roster-cal-duty { display: inline-block; margin-top: 4px; padding: 2px 6px; font-size: 12px; color: #6b4e00; background: #fff3a5; border: 1px solid #ffe58f; border-radius: 999px; }
/* 打卡紀錄卡片分隔樣式 */
.record-card { background: #f3f4f6; padding: 8px; margin: 8px 0; border-radius: 0; }
.record-card.pending-change { background: #ffe5cc; }
.record-card.changed-soft { background: #fff3e6; }
.record-actions { display: flex; gap: 8px; }
.record-actions .btn { flex: 1; }
/* 面板內按鈕統一直角 */
.panel .btn { border-radius: 0; }
.btn { border-radius: 0; }
#modalRoot .input { border: 1px solid #e5e7eb; text-align: center; }
#modalRoot select.input { -webkit-appearance: none; -moz-appearance: none; appearance: none; background: transparent; pointer-events: auto; }
#modalRoot select.input[data-key='role'] { pointer-events: none; }
/* Modal select dropdown icon */
#modalRoot select.input {
  background-color: #ffffff;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>");
  background-repeat: no-repeat;
  background-position: right 10px center;
  background-size: 14px 14px;
  padding-right: 32px;
}
/* Modal input edit icon */
#modalRoot input.input:not([type='file']) {
  background-color: #ffffff;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M12 20h9'/><path d='M16.5 3.5l4 4-11 11H5.5v-4z'/></svg>");
  background-repeat: no-repeat;
  background-position: left 10px center;
  background-size: 14px 14px;
  padding-left: 32px;
}
.app-header .home-map-overlay { position: absolute; inset: 0; z-index: 1; opacity: 0.40; pointer-events: none; }
.app-header .home-map-overlay img { width: 100%; height: 100%; object-fit: cover; }
#modalRoot .form-row .label { display: block; width: 100%; background: #EEEEEE; font-weight: 700; text-align: center; padding: 8px; }
.subtab-badge { position: absolute; top: 2px; right: 2px; min-width: 18px; height: 18px; padding: 0 6px; background: #CC0000; color: #ffffff; border-radius: 999px; font-size: 11px; line-height: 18px; text-align: center; box-shadow: 0 2px 6px rgba(0,0,0,0.15); }

/* 子分頁選擇器列高一致 */
.subtab-select { height: 36px; min-height: 36px; font-size: 14px; padding: 0 10px; border: 1px solid #e5e7eb; border-radius: 8px; background: #ffffff; }
#leaderMapSplit { width: 100%; max-width: 100%; }
#leaderMapView { width: 100%; max-width: 100%; }
#leaderStatusBlock { width: 100%; max-width: 100%; }
#leaderSection .panel { max-width: 100%; overflow-x: hidden; }
#leader-block-points-month #leaderPointsPrevMonth,
#leader-block-points-month #leaderPointsNextMonth { background: #ffffff; color: #111827; border: none; }
